{"version":3,"file":"index.4c23c242.js","sources":["../../../src/vueComponent/watermark/util.ts","../../../src/vueComponent/watermark/Index.vue","../../src/views/vueComponents/watermark/demo/index.vue","../../src/views/vueComponents/watermark/demo/index.md","../../src/views/vueComponents/watermark/api.md"],"sourcesContent":["export function createMarkBase64(str: string, opacity = 0.15) {\r\n  const _opacity = opacity > 1 ? 1 : (opacity < 0 ? 0.1 : opacity) // 介于 0 - 1 之间\r\n\r\n  const can = document.createElement('canvas');\r\n  const width = 200;\r\n  const height = 140;\r\n  Object.assign(can, { width, height });\r\n\r\n  const cans = can.getContext('2d');\r\n  if (cans) {\r\n    cans.rotate((-20 * Math.PI) / 120);\r\n    cans.font = '15px Vedana';\r\n    cans.fillStyle = `rgba(0, 0, 0, ${_opacity})`;\r\n    cans.textAlign = 'left';\r\n    cans.textBaseline = 'middle';\r\n    cans.fillText(str, width / 20, height);\r\n  }\r\n  return can.toDataURL('image/png');\r\n}","\r\n<template>\r\n  <div style=\"position: relative;\">\r\n    <div ref=\"marker\" style=\"position: absolute; inset: 0;pointer-events: none;\"></div>\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { createMarkBase64 } from \"./util\"\r\nconst props = defineProps({\r\n  text: {\r\n    default: () => \"水印\",\r\n    type: String\r\n  },\r\n  show: {\r\n    default: true,\r\n    type: Boolean\r\n  },\r\n  opacity: {\r\n    default: 0.15\r\n  }\r\n})\r\n\r\nconst marker = ref<HTMLElement>(document.createElement(\"div\"))\r\n\r\nlet lastMark = undefined\r\n\r\n// 显示水印\r\nasync function showMark() {\r\n  if (!unref(marker)) await nextTick()\r\n  const d = unref(marker)\r\n  d.style.zIndex = \"1000\"\r\n  const src = lastMark ?? createMarkBase64(props.text, props.opacity)\r\n  d.style.background = `url(${src})`\r\n}\r\n\r\nonMounted(() => { if (props.show) { showMark() } })\r\n\r\nwatch(\r\n  [() => props.text, () => props.show],\r\n  ([text, show]) => {\r\n    if (show) { showMark() }\r\n    else {\r\n      const el = unref(marker) as HTMLElement\r\n      el.style.background = ``\r\n    }\r\n  })\r\n</script>\r\n<style lang=\"less\" scoped></style>","<template>\r\n  <button v-if=\"showMark\" @click=\"showMark = false\">隐藏水印</button>\r\n  <button v-else @click=\"showMark = true\">显示水印</button>\r\n  <how-watermark text=\"哟、还有一个呢\" :show=\"showMark\" :opacity=\"0.5\" style=\"width: 80%;margin-top:10px\">\r\n    <div class=\"data-wrapper\">\r\n      <p> 曾经 我茫然前行</p>\r\n      <p> 黯夜的路上</p>\r\n      <p> 微风 刺痛着灵魂</p>\r\n      <p> 找不到应该的方向</p>\r\n      <p> 生命这样的旅程</p>\r\n      <p> 要用多少泪水来完整</p>\r\n      <p> 是否我能期待遥远天际</p>\r\n      <p> 一起飞翔 新造的人</p>\r\n      <p> 生命这样的旅程</p>\r\n      <p> 我渴求你的微笑来完整</p>\r\n      <p> 你能为我打开自由的门</p>\r\n      牵起手吧 新造的人\r\n    </div>\r\n  </how-watermark>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { HowWatermark } from \"howuse/vueComponent\";\r\nimport { ref } from 'vue';\r\nconst showMark = ref(true)\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.data-wrapper {\r\n  border: 1px solid rgba(0, 0, 0, 0.608);\r\n  height: 500px;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n","\n<script setup lang=\"ts\">\nconst excerpt = undefined\n  defineExpose({ frontmatter: {}, excerpt: undefined })\n</script>\n<script lang=\"ts\">\n/** frontmatter meta-data for MD page **/\nexport interface Frontmatter {\n  title?: string\n  description?: string\n  subject?: string\n  category?: string\n  name?: string\n  excerpt?: string\n  image?: string\n  layout?: string\n  requiredAuth?: boolean\n  meta?: Record<string, any>[]\n  [key: string]: unknown\n}\nexport const frontmatter: Frontmatter = {}\nexport const excerpt: string | undefined = \"\"\n\n</script>\n<template>\n<div class=\"markdown-body\"><pre class=\"language-vue\"><code class=\"language-vue\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>渲染10万条数据示例<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>how-virtual-scroll</span> <span class=\"token attr-name\">:data-source</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:el-height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>35<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">#default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{ item }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data-item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n          条目_&#123&#123 item &#125&#125\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>how-virtual-scroll</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ts<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HowVirtualScroll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"howuse/vueComponent\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Ref <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue\"</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> Ref<span class=\"token operator\">&lt;</span>number<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  data<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>less<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\r\n<span class=\"token selector\">.data-wrapper</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0.608<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token selector\">.data-item</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span>\r\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n</template>\n","\n<script setup lang=\"ts\">\nconst excerpt = undefined\n  defineExpose({ frontmatter: {}, excerpt: undefined })\n</script>\n<script lang=\"ts\">\n/** frontmatter meta-data for MD page **/\nexport interface Frontmatter {\n  title?: string\n  description?: string\n  subject?: string\n  category?: string\n  name?: string\n  excerpt?: string\n  image?: string\n  layout?: string\n  requiredAuth?: boolean\n  meta?: Record<string, any>[]\n  [key: string]: unknown\n}\nexport const frontmatter: Frontmatter = {}\nexport const excerpt: string | undefined = \"\"\n\n</script>\n<template>\n<div class=\"markdown-body\"><h1>API 说明</h1>\n<p>自定义文字水印</p>\n<h2>props &amp; event</h2>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>show</td>\n<td>是否显示水印，默认<code>true</code></td>\n<td>true/false</td>\n</tr>\n<tr>\n<td>opacity</td>\n<td>水印透明度，默认<code>0.15</code>，范围 0-1</td>\n<td>number</td>\n</tr>\n</tbody>\n</table>\n<h2>slot</h2>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>default</td>\n<td>内容</td>\n</tr>\n</tbody>\n</table>\n</div>\n</template>\n"],"names":["createMarkBase64","str","opacity","_opacity","can","width","height","cans","marker","ref","showMark","unref","nextTick","d","src","props","onMounted","watch","text","show","el","expose"],"mappings":"iPAAgB,SAAAA,EAAiBC,EAAaC,EAAU,IAAM,CAC5D,MAAMC,EAAWD,EAAU,EAAI,EAAKA,EAAU,EAAI,GAAMA,EAElDE,EAAM,SAAS,cAAc,QAAQ,EACrCC,EAAQ,IACRC,EAAS,IACf,OAAO,OAAOF,EAAK,CAAE,MAAAC,EAAO,OAAAC,CAAQ,CAAA,EAE9B,MAAAC,EAAOH,EAAI,WAAW,IAAI,EAChC,OAAIG,IACFA,EAAK,OAAQ,IAAM,KAAK,GAAM,GAAG,EACjCA,EAAK,KAAO,cACZA,EAAK,UAAY,iBAAiBJ,KAClCI,EAAK,UAAY,OACjBA,EAAK,aAAe,SACpBA,EAAK,SAASN,EAAKI,EAAQ,GAAIC,CAAM,GAEhCF,EAAI,UAAU,WAAW,CAClC,0KCKAI,EAAAC,EAAA,SAAA,cAAA,KAAA,CAAA,EAKA,eAAAC,GAAA,CACEC,EAAAH,CAAA,GAAoB,MAAAI,EAAA,EACpB,MAAAC,EAAAF,EAAAH,CAAA,EACAK,EAAA,MAAA,OAAA,OACA,MAAAC,EAAAd,EAAAe,EAAA,KAAAA,EAAA,OAAA,EACAF,EAAA,MAAA,WAAA,OAAAC,IAA4B,CAG9BE,OAAAA,EAAA,IAAA,CAAkBD,EAAA,MAAkBL,GAAW,CAAA,EAE/CO,EAAA,CAAA,IAAAF,EAAA,KAAA,IAAAA,EAAA,IAAA,EACqC,CAAA,CAAAG,EAAAC,CAAA,IAAA,CAEjC,GAAAA,EAAYT,QAAS,CAEnB,MAAAU,EAAAT,EAAAH,CAAA,EACAY,EAAA,MAAA,WAAA,EAAsB,CACxB,CACF,8/BCvBF,MAAAV,EAAAD,EAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yNCpBE,OAAAY,EAAa,CAAE,YAAa,CAAA,EAAI,QAAS,OAAW,2sBCApD,OAAAA,EAAa,CAAE,YAAa,CAAA,EAAI,QAAS,OAAW"}